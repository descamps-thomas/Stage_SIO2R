
DOCUMENTATION DOMAINEDPP


Contexte :Je vais vous présenter mon projet que j’ai du réaliser en stage sur une durée de 5 semaines.
Le contexte est une entreprise qui à besoins d’un site web.
J’ai donc décidé de prendre un domaine de pêche prés de chez moi.

Introduction : Le site que j’ai réalisé a plusieurs fonctionnalité avec une partie utilisateur est une autres partie administrateur ce qui permet de gérer des fonctionnalité que je vais vous présenté plus bas 

PARTIE ACCUEIL

Le site est composé d’une page d’accueil avec un parallaxe qui permet d’avoir l’image qui bouge en même temps que l’on défile dans la page.
Puis d’une NavBar qui bouge en fonction du déplacement de l’utilisateur sur la page.

![index1](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/c68d1ce1-04c0-49ff-b60b-812c4aeb2e53)
![index2](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/ca8f7e13-a8bb-447f-9f89-38bc081d7e3d)
![index3](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/4abc6fd7-03f4-463c-815d-103b10c05661)
![index4](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/a3b76911-a093-4ffb-824e-10e6cc5fa26e)

PARTIE INSCRIPTION

Quand vous allez arrivé sur le site web la première page est une présentation global du domaine avec ses différents étangs est pécheurs.
Sur la barre de navigation en haut vous retrouverez plusieurs bouton qui exécute différente action , nous allons nous diriger vers le bouton d’inscription.
Ce bouton permet au utilisateur de créé leur compte avec un nom, prénom, e-mail, mot de passe, est la confirmation du mot de passe (voici un exemple).

Pour vous montrez la page suivante on va effectué une création de compte.

![inscriptions1](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/0e17ae2d-b018-482a-89d5-3f92426990c5)

![inscriptions2](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/a1f2b88e-45d6-4009-90c9-30fd110b324b)

![inscription3](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/245c575f-410f-4a67-a9e3-21b09e6495e4)

Quand le compte est créé le login vous sera afficher en grand (comme si dessus)
Quand le compte utilisateur est créé le rôle de l’administrateur est important car l’administrateur doit validé votre compte sinon vous serai redirigé sur la page d’accueil.


PARTIE CONNEXION

Comme pour les inscriptions un va cliquer sur le bouton de connexion pour ce connecté est accédé a l’interface utilisateur.

![connexion1](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/d29b2bdb-2dcb-4a41-95ce-fea9d9cae9a5)

![connexion2](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/83bfd1d3-c426-4760-b84c-a20786a6a65a)

PARTIE ADMINISTRATION

Dans la partie d’administrateur je vais vous présentez tous les pages disponibles est les fonctionnalité.
Premièrement l’administrateur a une page pour Afficher les utilisateur ce qui permet de voir les personne inscrit est les personne a autorisé sur cette page on peux voir les information des utilisateur (login, nom, prénom, e-mail).
Cette page dispose de plusieurs fonctionnalité une pour changer le rôle de l’utilisateur cette fonctionnalité est représenté par un bouton avec des personnages de couleur ( Bleu = administrateur, Vert = utilisateur, Rouge = inactif/en attente)



![role](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/7587b9cb-74cc-4ad1-9337-9c38c75ba6f0)




Sur la page on peux voir un dernier bouton qui est la corbeille en rouge ce bouton permet de supprimé les utilisateur avec un double clique (comme en dessous)
![Supp](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/6e27825a-8c7f-482a-9823-68e8c2ee7304)


Dans cette deuxième partie je vais vous présenté la création de partie de pêche.
Cette page permet de créé des événement avec plusieurs information (le nom, le nombre de personnes max, nom de l’étang, le type de pêche, la date de l’événement, est l’horaire).
Ces information permettra un utilisateur de choisir si tous ses information lui convienne pour une potentielle réservation.


				
 ![bouton crea](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/10bad9bc-6192-458b-833a-2fb988abb5b0)


![crea1](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/f60c7e22-1218-45d2-884f-ffeade946c40)



             






La prochaine fonctionnalité que je vais vous présenté est l’affichage des partie de pêche.
Cette page permet d’affiché les différente partie de pêche avec tous les informations qui on était remplit a la création d’événement juste au dessus.
Sur la page nous verrons plusieurs bouton le premier est la clé de différente couleur (Rouge = archivé les utilisateur ne voit les partie, Vert = en ligne les utilisateur voit la partie est peuvent réservé leur place).

![Affiche partie](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/fedcd066-c6dc-4e40-8600-a2b8841d5778)
![tableau de bord](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/f0e95c7f-d149-4b73-a473-bd80c2cbc855)



Il reste encore 2 bouton disponible le premier est un œil celui-ci permet de voir les réservation qui on était effectué par les utilisateur.

![affichereserv](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/f806dd33-be4d-4fc8-9a03-6c9758bbaf4f)


Si un utilisateur ces trompé dans la réservation vous pourrais supprimé sa réservation avec la poubelle rouge en bout de ligne 

Est la dernier fonctionnalité disponible est la modification de la partie de pêche si l’administrateur veux modifier ou ses trompé dans une information il pourra modifier l’événement 


![tableau de bord](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/89ee5fac-4742-44da-9c40-d57e2cee1251)

![modif](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/edf1236e-7327-4633-a06a-3499884fe0a7)












Sur ce site web j’ai ajouté une fonctionnalité qui est une trésorerie ce qui permet d’ajouté des (Entrée = l’argent en plus, Sortie = l’argent en moins ).
Vous avez un filtre a disposition qui est directement sélectionner sur le mois en court mes il a possibilité de choisir le mois qu’on souhaite est l’année souhaité.


![tresorie](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/26f7ea2c-258a-4958-ab51-e02b4efe6cf3)

![filtre](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/98f94483-4a2d-4daf-86d3-82f6ed121f40)














Quand vous avez choisit votre mois vous pouvez cliquer sur filtrer puis vous avec une aperçu des entré est des sortie tous en dessous il y a le total entré est total sortie qui sont affiché est qui ce met a jour des qu’une donnée est saisie dans le tableau.
![entré sortie](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/b25434d1-e23d-442f-93d1-c74a7a7d61ee)


Pour ajouté une donnée vous cliqué sur le bouton Ajouté une donnée.

Ce bouton vous dirige vers cette page (ci-dessus) sur cette page il vous restera a remplir les information souhaité (libellé, prix, type écriture si ses une entrée ou une sortie).

			
![ajoute](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/2c585224-e4c6-47c0-ae5a-c777a1d5846c)

			










La dernier fonctionnalité pour l’administrateur est le CMS (Système de gestion de contenu ou Content Management System).
Cette fonctionnalité permet de modifier les photos qui sont sur la page d’accueil du site 
				




![CMS](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/e40c1c83-957d-4117-b123-4036233c4fdd)











Quand vous cliquer sur ce bouton vous serais redirigé sur cette page (ci-dessous)


![CMSSSS](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/892e5a6a-5be9-45d9-848c-af0fcc851b2d)



Il vous restera plus cas sélectionné les photo que vous souhaité changer est de cliquer sur le bouton téléchargé l’images.




PARTIE UTILISATEUR

Après que l’administrateur est accepté utilisateur la personne n’a plus cas ce connecté elle tombera sur une interface simple avec 2 bouton 


![utilisateur](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/0e490de8-f0c8-4082-ab41-da80534d37d7)






La premier fonctionnalité est afficher les événements ce qui permet a l’utilisateur de choisir la partie qui l’intéresse est de pouvoir reverser en cliquant sur (Je réserve mes place).

Après avoir cliquer sur le bouton vous serais redirigé vers la page de réservation ou il restera plus cas choisir le nombres de place que l’utilisateur souhaite réserver

![interface reserve](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/e4674b00-33b9-40f5-b2a4-2efdccce6137)


Puis la seconde fonctionnalité disponible pour les utilisateur est les administrateur est la gestion du compte cette fonctionnalité permet de modifier le mot de passe.




                                  
![modifmdp](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/67ee3bf6-f7c5-41bd-9512-84ef7c3fc1a5)






PARTIE SERVEUR

Le site web est la base de donnée sont héberger sur un VPS (serveur privé virtuel).
Dans ce serveur les sites web sont placés dans des conteneur (LXC),pour la redirection sur les conteneurs souhaité j’ai donc ajouté un conteneur HAPROXY qui permet de faire la redirection vers le site souhaité selon le nom de domaine que l’on indique.                        
  

![haproxy (copie)](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/d82af7c6-24eb-4edc-9321-94ac64c494b1)


![haproxy](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/f098d491-4a36-446f-83c8-5d1a1df79539)





Voici la configuration réalisé sur le Haproxy, j’ai installer MariaDB pour intégré la base de donnée qui est importé en même temps que tous le reste du projet.
 ![Diagramme1](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/90be6362-e13b-4d5f-a27d-1594a73e8c6a)


Pour la configurations dans le conteneur j’ai du installé apache2 puis mètre l’entièreté du projet dans le /var /www /html dans le fichier j’ai supprimé l’index de apache pour la remplacé par la mienne est j’ai importé mon projet garce a yafc j’ai était chercher mon zip sur un ftp que j’ai dézippé dans le répertoire.

![Diagramme2](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/df08ae36-1b18-4071-93c9-2e24ca14ced2)



Sur le serveur j’ai aussi mis en place des sauvegarde automatique avec un crontab le script sauvegarde 1 fois par mois l’entièreté des pages web qui l’envoie sur un ftp ses script sont réalisé avec expect se qui permet de rentré les information souhaité sans les tapé, le deuxième script réalisé 1 fois par semaine pour récupéré la base de donnée est la stocké sur le ftp.

![save](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/d26ec405-60fe-4554-8d5f-2a1ccbe09bd8)

![save html](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/f2ec173b-256f-4744-9945-df2d4d0d7ffd)
![save bdd](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/36b53fe6-4bce-4237-ac37-6f3e138e43fd)








Le configuration du crontab qui exécute les script une fois par mois et une fois par semaine.

![cront](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/8a3b7e89-c24f-4c3c-a171-7cd73681f38e)











Voici les sauvegarde qui sont dans le ftp (au dessus), voici les script est le crontab réalisé (ci-dessous).  
Voici le script qui sauvegarde la BDD



![savebdd](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/3aca7496-baaf-48ee-89e4-981ab02f6351)





Voici le script qui sauvegarde le répertoire html. 

 
 
 ![scrpt save](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/9b25b870-e9d6-455f-9bab-e08dc94e7d50)

 
 
 
 

 
 
Voici la configuration fail2ban qui permet d’analyser un fichier le log qui est remplit a chaque connexion est qui ban selon des paramètre spéciaux 
![fail2ban1](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/30905608-a564-4a3d-a8d3-949f12a1f2d1)
![fail2ban2](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/346fd4a3-960e-4a6b-9a75-4cb3190e25e9)
![fail2ban3](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/291f8c8f-a77a-4937-affd-efff992ab298)
![fail2ban4](https://github.com/descamps-thomas/Stage_SIO2R/assets/130738201/41339237-3b0d-4fe6-bd82-90552eb7df6b)









